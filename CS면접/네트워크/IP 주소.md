#### **8. DHCP가 무엇인지 설명해 주세요.**
##### 설명
DHCP는 **네트워크에 접속하는 장치(클라이언트)에게 IP 주소 및 네트워크 설정을 자동으로 할당해 주는 프로토콜**입니다.
- **IP 주소 자동 할당**
    - 클라이언트가 네트워크에 연결될 때 **DHCP 서버가 IP 주소를 자동으로 부여**
    - 정해진 시간(임대 기간, Lease Time) 동안 해당 IP를 사용할 수 있음
- **네트워크 설정 자동 구성**
    - IP 주소뿐만 아니라 **서브넷 마스크, 게이트웨이, DNS 서버 등의 설정을 자동으로 제공**
- **IP 주소 관리 최적화**
    - 사용하지 않는 IP는 회수하여 다른 장치에 재할당하여 **IP 주소 낭비를 방지**

#####  DHCP는 몇 계층 프로토콜인가요?
**DHCP(Dynamic Host Configuration Protocol)는 애플리케이션 계층(Application Layer) 프로토콜**입니다.
✅ **이유:**
- DHCP는 **클라이언트가 네트워크 설정(IP 주소, 서브넷 마스크, 게이트웨이, DNS 서버 등)을 요청하고, 서버가 이를 할당하는 역할**을 합니다.
##### DHCP는 어떻게 동작하나요?
DHCP 동작 과정 (DORA 프로세스)**

DHCP는 **4단계 과정(DORA: Discover → Offer → Request → Acknowledge)을 통해 클라이언트에게 IP를 할당**합니다.

1️⃣ DHCP Discover (클라이언트 → 서버, "IP 주소 주세요!")**
- 클라이언트는 IP가 없는 상태이므로 **브로드캐스트(255.255.255.255)로 DHCP 서버를 찾음**
- 패킷에는 **"나는 DHCP 서버를 찾고 있어요!"**라는 메시지가 포함됨
- 출발지 IP: `0.0.0.0` (아직 할당받은 IP가 없음)
- 목적지 IP: `255.255.255.255` (모든 장치에 브로드캐스트)
- 출발지 포트: 68번 클라이언트 포트
- 목적지 포트: `UDP 67번` (DHCP 서버 포트)
    
**2️⃣ DHCP Offer (서버 → 클라이언트, "이 IP 주소를 사용할 수 있어요!")**
- DHCP 서버가 DHCP Discover 메시지를 받고, 클라이언트에게 사용 가능한 **IP 주소와 네트워크 설정을 제공**    
- 이때 아직 IP 주소를 확정한 것이 아니라, **제안(Offer)만 하는 상태**
- 출발지 IP: `DHCP 서버의 IP (예: 192.168.1.1)`
- 목적지 IP: `브로드캐스트(255.255.255.255) 또는 클라이언트 MAC 주소`
- 목적지 포트: `UDP 68번` (DHCP 클라이언트 포트)
    

📌 **예제 메시지**

`DHCP Offer: "192.168.1.100을 사용할 수 있어요! 서브넷 마스크는 255.255.255.0입니다."`

 **3️⃣ DHCP Request (클라이언트 → 서버, "이 IP 주소를 사용할게요!")**
- 클라이언트는 받은 DHCP Offer 메시지를 보고, 사용할 IP를 결정한 후 DHCP 서버에게 **"이 IP를 할당받을게요!"**라고 요청
- 다른 DHCP 서버의 제안을 거절하고, 하나의 DHCP 서버와 연결을 확정
- 출발지 IP: `0.0.0.0` (아직 IP 없음)
- 목적지 IP: `브로드캐스트(255.255.255.255)`
    <목적지 IP가 브로드캐스트인 이유: 
    동시에 **다른 서버들에게는 "거절" 메시지의 역할**도 합니다.>

📌 **예제 메시지**

`DHCP Request: "192.168.1.100을 사용할게요! 정식으로 할당해 주세요."`

**4️⃣ DHCP Acknowledge (서버 → 클라이언트, "IP 할당 완료!")**
- DHCP 서버는 클라이언트 요청을 승인하고, **해당 IP 주소를 할당**
- 이때 IP 임대 기간(Lease Time)도 함께 전달
- 출발지 IP: `DHCP 서버의 IP`
- 목적지 IP: `클라이언트의 IP (예: 192.168.1.100)`
    

📌 **예제 메시지**

`DHCP Acknowledge: "IP 192.168.1.100 할당 완료! 24시간 동안 사용할 수 있습니다."`

---

**📌 DHCP 동작 과정 요약**

1️⃣ **Discover** → 클라이언트가 DHCP 서버를 찾음 (브로드캐스트)  
2️⃣ **Offer** → 서버가 사용 가능한 IP를 제안  
3️⃣ **Request** → 클라이언트가 특정 IP를 사용하겠다고 요청  
4️⃣ **Acknowledge** → 서버가 요청을 승인하고 최종적으로 IP 할당
##### DHCP에서 UDP를 사용하는 이유가 무엇인가요?
DHCP는 빠르고 단순한 통신이 필요하고, 클라이언트는 IP가 없는 상태이기 때문에 UDP를 사용합니다.

. 📡 클라이언트는 아직 **IP가 없다!**
- DHCP 통신은 **클라이언트가 IP를 갖기 전에** 시작됩니다.
- 이 상태에서는 **TCP의 연결 설정(3-way handshake)을 할 수 없습니다.**
-  TCP는 IP가 있어야 연결 가능    
- 하지만 **UDP는 연결 없이 데이터를 전송할 수 있습니다.**  
    → → **즉시 전송 가능!**

🧭 DHCP는 **브로드캐스트 전송**을 사용함
- DHCP Discover, Request는 `255.255.255.255` 브로드캐스트로 전송됩니다.
- **TCP는 브로드캐스트를 지원하지 않습니다.**
-  TCP는 "양 끝단 간의 연결"이 전제    
- **UDP는 브로드캐스트/멀티캐스트 전송이 가능합니다.**
##### DHCP에서, IP 주소 말고 추가로 제공해주는 정보가 있나요?
일반적인 PC에서 DHCP로 받는 설정들
- IP 주소: `192.168.0.100`
- 서브넷 마스크: `255.255.255.0`
- 게이트웨이: `192.168.0.1`
- DNS 서버: `8.8.8.8`, `8.8.4.4`
- 리스 타임: `86400초` (24시간)

##### DHCP의 유효기간은 얼마나 긴가요?
**DHCP의 유효기간**은 고정된 것이 아니라, **DHCP 서버에서 설정한 리스 타임(Lease Time)**에 따라 달라집니다.

리스 타임(Lease Time)이란?
> 클라이언트가 할당받은 IP 주소를 **얼마 동안 사용할 수 있는지**를 나타내는 유효 시간입니다.  
> 이 시간이 지나면, IP를 계속 사용하기 위해 갱신(Renew)을 요청해야 합니다.

![[Pasted image 20250405021707.png]]

IP 회수 흐름
1. **IP 임대 (DHCP Lease)**
    - 클라이언트가 IP 주소를 요청하면, 서버는 일정 시간 동안 IP를 임대해줍니다. (예: 24시간)
2. **리스 갱신 요청**
    - 클라이언트는 리스 타임의 **50% 시점**에 해당 IP를 계속 쓰겠다고 요청합니다.
3. **갱신 실패**
    - 클라이언트가 오프라인이 되거나, 네트워크에서 사라졌다면:
        - **갱신 요청을 보내지 않음**
        - 또는 서버 응답 실패
4. **리스 만료**
    - 리스 시간이 다 지나면, DHCP 서버는 **해당 IP를 회수(Expired 처리)**합니다.
5. **재할당**
    - 다른 장치가 새로운 IP를 요청할 경우, **회수된 IP를 재사용**할 수 있습니다.

#### **9. IP 주소는 무엇이며, 어떤 기능을 하고 있나요?**
##### 설명
**IP 주소는 인터넷이나 네트워크에 연결된 장비(호스트)를 식별하기 위한 고유한 주소**입니다.  
마치 집의 주소처럼, 데이터를 정확한 위치로 전달하는 데 사용됩니다.
기능

|                                |                                 |
| ------------------------------ | ------------------------------- |
| **식별(Identification)**         | 네트워크 상의 각 장치를 구별하기 위한 고유 주소 역할  |
| **위치 지정(Location Addressing)** | 네트워크 내에서 **어디에 있는 장비인지**를 나타냄   |
| **라우팅(Routing)**               | 데이터를 **목적지까지 전달**하는 경로를 찾는 데 사용 |
|                                |                                 |
##### IPv6는 IPv4의 주소 고갈 문제를 해결하기 위해 만들어졌지만, 아직도 수많은 기기가 IPv4를 사용하고 있습니다. 고갈 문제를 어떻게 해결할 수 있을까요?
 **NAT (Network Address Translation)**
> **가장 대표적인 해결책**
- 하나의 공인 IP 주소로 여러 사설 IP 기기가 인터넷에 접속할 수 있도록 해줍니다.
- 내부 네트워크에서는 사설 IP 사용 → NAT 장비가 공인 IP로 변환
- 대표적인 예: 공유기
 🟢 효과
- 하나의 공인 IP만으로 수십~수천 대의 장치를 인터넷에 연결 가능
- 대부분의 가정, 회사, 클라우드 인프라에서 사용 중

**CIDR (Classless Inter-Domain Routing)**
> IP 주소를 보다 효율적으로 할당하는 방식
- 과거의 A/B/C 클래스 대신, 유연한 주소 할당 (`/12`, `/22` 등 가능)
- **주소 낭비를 줄이고** 더 작은 단위로 네트워크를 쪼개 사용 가능

**DHCP를 통한 동적 IP 할당**
- 고정 IP 대신 **필요할 때마다 임시로 IP를 할당**하여 재사용 가능
- 장치가 네트워크를 떠나면 IP 주소를 회수해서 다른 장치에 재할당
##### IPv4와 IPv6의 차이에 대해 설명해 주세요.
IPv4와 IPv6는 **인터넷 프로토콜(IP)의 두 가지 버전**으로, 주로 **주소 체계와 기능 면에서 차이**가 있습니다.
- **주소 길이**
- **주소 개수**
- **주소 표현 방식**    
- **주소 할당 방식**    
- **NAT 필요 여부**    
- **보안 기능**    
- **브로드캐스트 지원 여부**    

<주소 길이의 차이>

**IPv4는 32비트 주소 체계**를 사용합니다.  
즉, 2의 32승 개, 약 **43억 개의 IP 주소**만 만들 수 있습니다.  
처음엔 충분해 보였지만, 스마트폰, IoT 기기 등 인터넷에 연결되는 장치가 폭증하면서 점점 모자라졌습니다.

그래서 나온 것이 **IPv6**입니다.  
IPv6는 **128비트 주소 체계**를 사용합니다.  
2의 128승 개, 말 그대로 **상상할 수 없을 만큼 많은 주소**를 만들 수 있습니다.  
그래서 이론적으로 지구상의 모든 모래알에 IP를 할당해도 남는다고 합니다.

<주소 표현 방식의 차이>
- IPv4는 우리가 익숙한 `"192.168.0.1"`처럼 **점(.)으로 구분된 10진수 네 개**로 표현됩니다.
- IPv6는 `"2001:0db8:85a3:0000:0000:8a2e:0370:7334"`처럼 **콜론(:)으로 구분된 16진수로 표현됩니다.
IPv6는 너무 길어서, 중간에 0이 많은 부분은 `::`으로 줄여서 표현할 수도 있습니다.

< IP 주소를 설정하는 방식>

IPv4에서는 보통 수동으로 IP를 설정하거나, **DHCP 서버를 통해 할당**받았습니다.

IPv6는 조금 더 똑똑해서, **라우터로부터 정보를 받아 스스로 IP 주소를 만들어낼 수 있는 기능(Stateless Address Autoconfiguration)**이 들어가 있습니다.  

< NAT 사용 여부 필요없음>

<보안>
IPv4는 **보안(IPSec)** 기능이 **옵션**이었습니다.  
IPv6는 아예 기본적으로 **보안 기능이 내장**

<7. 전송 방식의 차이>

IPv4는 특정 네트워크에 모두 보내는 **브로드캐스트** 기능이 있었지만,  
IPv6는 그걸 없애고, 대신 **멀티캐스트(특정 그룹에만 전송)**와 **애니캐스트(가장 가까운 서버에 전송)** 개념을 도입했습니다.  
→ **트래픽을 줄이고 효율을 높인 것**입니다.


##### 수많은 사람들이 유동 IP를 사용하고 있지만, 수많은 공유기에서는 고정 주소를 제공하는 기능이 이미 존재합니다. 어떻게 가능한 걸까요?
- IPv4를 사용하는 장비와 IPv6를 사용하는 같은 네트워크 내에서 통신이 가능한가요? 가능하다면 어떤 방법을 사용하나요?
- IP가 송신자와 수신자를 정확하게 전송되는 것을 보장해 주나요?
- IPv4에서 수행하는 Checksum과 TCP에서 수행하는 Checksum은 어떤 차이가 있나요?
- TTL(Hop Limit)이란 무엇인가요?
- IP 주소와 MAC 주소의 차이에 대해 설명해 주세요.

#### **19. 서브넷 마스크와, 게이트웨이에 대해 설명해 주세요.**
##### 설명

**서브넷 마스크(Subnet Mask)**와 **게이트웨이(Gateway)**는 IP 네트워크에서 통신 경로를 정하는 데 매우 중요한 역할을 합니다.

서브넷 마스크 (Subnet Mask)
 📌 정의
> **IP 주소를 "네트워크 영역"과 "호스트 영역"으로 나누는 역할**을 하는 값입니다.
📌 예시
- IP 주소: `192.168.10.5`
- 서브넷 마스크: `255.255.255.0` → 24비트
    
이 경우:
- **192.168.10** → 네트워크 부분
- **.5** → 호스트 부분
즉, `192.168.10.0` 네트워크에 속한 256개의 IP 중 하나라는 뜻입니다.
##### NAT에 대해 설명해 주세요.
**NAT(Network Address Translation)**는  
**사설 IP 주소 ↔ 공인 IP 주소**를 변환하여  
사설 네트워크(내부망)와 공용 네트워크(인터넷)가 통신할 수 있도록 하는 기술입니다.
🔍 왜 필요한가?
- 사설 IP는 인터넷에서 **직접 사용 불가**합니다.
- IPv4 주소 부족 문제 해결을 위해  
    → **하나의 공인 IP로 여러 장치가 인터넷에 접속**할 수 있도록 도와줍니다.
**여러 대의 장치가 하나의 공인 IP 주소를 "공유"해서 인터넷에 접속**하게 합니다.

왜 이게 주소 부족 해결에 도움이 되는가?
- **공인 IP는 한정되어 있음** → 모든 장치에 줄 수 없음
- **NAT가 사설 IP ↔ 공인 IP를 중개**하면서
    - 내부에서는 사설 IP 사용 (`192.168.x.x`, `10.x.x.x`, `172.16.x.x ~ 172.31.x.x`)
    - 외부와는 NAT 장치(공유기 등)만 공인 IP 필요
- 그래서 전 세계 수십억 개 장치가 비교적 적은 공인 IP만으로 **인터넷을 동시에 사용할 수 있음*
- 
 1️⃣Static NAT (고정 NAT)
- **1:1 매핑**    
- 항상 같은 내부 IP ↔ 같은 공인 IP
- 외부에서 **항상 같은 주소로 접근 가능**
- 예: 사내 웹 서버, 메일 서버
- 
 2️⃣ Dynamic NAT (동적 NAT)
- 내부 → 외부로 통신할 때 **공인 IP 풀에서 하나 임시 할당**
- 연결이 끝나면 공인 IP 반납
- 외부에서 내부로 접근은 어려움 (비연결형)
 3️⃣ PAT (NAPT)
- 다수의 내부 장치가 **하나의 공인 IP**를 공유
- 구분은 **포트 번호**로!
- 가장 널리 사용되는 방식 (가정용 공유기 등)
##### 서브넷 마스크의 표현 방식에 대해 설명해 주세요.
**점으로 구분된 십진수(Dotted Decimal Notation)**
- 예시: `255.255.255.0`
각 옥텟(8비트)을 십진수로 표현한 방식입니다.  
이 값은 **앞쪽부터 1로 채워진 비트 수**를 나타내며,  
1은 네트워크 영역, 0은 호스트 영역입니다.

`255.255.255.0 = 11111111.11111111.11111111.00000000 → 네트워크 비트: 24비트 / 호스트 비트: 8비트`

 2️⃣ **슬래시 표기법(CIDR 표기법, Classless Inter-Domain Routing)**
- 예시: `192.168.1.0/24`
여기서 `/24`는 서브넷 마스크의 **1로 채워진 비트 수(= 네트워크 비트 길이)**를 의미합니다.  
즉, `255.255.255.0`과 같은 의미입니다.

##### 그렇다면, 255.0.255.0 같은 꼴의 서브넷 마스크도 가능한가요?
✅ 서브넷 마스크의 올바른 규칙
서브넷 마스크는 **왼쪽부터 연속된 1**로 시작하고, **1이 끝나면 반드시 0만 나와야 합니다.**  
즉, **1 → 0** 전환은 가능하지만 **0 → 1** 전환은 불가능합니다.
 예시 (✅ 올바른 마스크)
- `11111111.11111111.00000000.00000000` → `255.255.0.0`
- `11111111.11111111.11111100.00000000` → `255.255.252.0`
예시 (❌ 잘못된 마스크)

- `11111111.00000000.11111111.00000000` → `255.0.255.0`  
    → **1과 0이 섞여 있음**, 연속된 1의 규칙을 어김
    

---

🧠 왜 이런 규칙이 필요할까?
서브넷 마스크는 **IP 주소에서 어느 부분이 네트워크 영역인지 판단하는 기준**이에요.  
만약 `255.0.255.0` 같이 **비트가 불연속**하다면,  
네트워크와 호스트 영역을 정확히 구분할 수 없기 때문에 **라우팅과 IP 계산이 무의미해집니다.**

**A, B, C, D 클래스**는 과거에 사용하던 **IP 주소 분류 체계(Classful Addressing)**입니다.  
요즘에는 대부분 **CIDR(Classless Inter-Domain Routing)**을 사용하지만,  
클래스 개념은 여전히 네트워크의 기본 개념을 이해하는 데 유용합니다.

✅ 클래스(Class)란?

IP 주소는 32비트(IPv4 기준)이며,  
**과거에는 이 32비트를 앞부분 비트 값에 따라 클래스 A~E로 나누어 사용**했습니다.